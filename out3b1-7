GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestSnapshotUnreliableRecoverConcurrentPartition2C|| true
=== RUN   TestSnapshotUnreliableRecoverConcurrentPartition2C
[2] becomes leader
[2] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[2] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[2] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[2] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[2] with lastIdx 18 send hb to peers [1 2 3 4 5] 16 16 16 13
[2] with lastIdx 31 send hb to peers [1 2 3 4 5] 28 28 28 28
[2] with lastIdx 46 send hb to peers [1 2 3 4 5] 39 41 41 41
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[2] with lastIdx 53 send hb to peers [1 2 3 4 5] 53 48 48 48
[5] becomes leader
[5] with lastIdx 49 send hb to peers [1 2 3 4 5] 49 5 49 5
[5] with lastIdx 73 send hb to peers [1 2 3 4 5] 69 5 64 69
[5] with lastIdx 92 send hb to peers [1 2 3 4 5] 88 5 64 90
[5] with lastIdx 112 send hb to peers [1 2 3 4 5] 111 5 64 110
[5] with lastIdx 131 send hb to peers [1 2 3 4 5] 127 5 64 127
[5] with lastIdx 148 send hb to peers [1 2 3 4 5] 144 5 64 144
[5] with lastIdx 161 send hb to peers [1 2 3 4 5] 159 5 64 159
[5] with lastIdx 167 send hb to peers [1 2 3 4 5] 167 5 64 162
[3] receives snapshot from [5]
[5] with lastIdx 167 send hb to peers [1 2 3 4 5] 167 5 64 162
[5] with lastIdx 167 send hb to peers [1 2 3 4 5] 167 5 64 162
[5] with lastIdx 191 send hb to peers [1 2 3 4 5] 190 5 190 162
[5] with lastIdx 215 send hb to peers [1 2 3 4 5] 213 5 213 162
[5] with lastIdx 238 send hb to peers [1 2 3 4 5] 237 5 236 162
[5] with lastIdx 261 send hb to peers [1 2 3 4 5] 259 5 259 162
[2] receives snapshot from [5]
[5] with lastIdx 285 send hb to peers [1 2 3 4 5] 284 282 282 162
[5] with lastIdx 307 send hb to peers [1 2 3 4 5] 305 304 303 162
[5] with lastIdx 331 send hb to peers [1 2 3 4 5] 328 328 330 162
[5] with lastIdx 361 send hb to peers [1 2 3 4 5] 357 357 356 162
[5] with lastIdx 389 send hb to peers [1 2 3 4 5] 385 384 385 162
[5] with lastIdx 417 send hb to peers [1 2 3 4 5] 416 415 416 162
[5] with lastIdx 447 send hb to peers [1 2 3 4 5] 442 447 441 162
[2] becomes leader
[2] with lastIdx 448 send hb to peers [1 2 3 4 5] 266 266 266 266
[2] with lastIdx 474 send hb to peers [1 2 3 4 5] 470 266 266 470
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 266 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 266 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 266 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 266 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 266 481
[4] receives snapshot from [2]
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 266 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 481 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 266 481 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 481 481 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 481 481 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 481 481 481
[2] with lastIdx 481 send hb to peers [1 2 3 4 5] 479 481 481 481
read from clients 0
[3] becomes leader
[3] with lastIdx 488 send hb to peers [1 2 3 4 5] 487 487 487 487
[3] with lastIdx 496 send hb to peers [1 2 3 4 5] 495 495 495 495
[3] with lastIdx 503 send hb to peers [1 2 3 4 5] 503 503 502 502
[3] with lastIdx 511 send hb to peers [1 2 3 4 5] 511 511 511 511
[3] with lastIdx 520 send hb to peers [1 2 3 4 5] 519 519 519 519
read from clients 1
[3] with lastIdx 525 send hb to peers [1 2 3 4 5] 524 524 524 524
[3] with lastIdx 532 send hb to peers [1 2 3 4 5] 531 531 531 531
[3] with lastIdx 538 send hb to peers [1 2 3 4 5] 537 538 538 537
[3] with lastIdx 544 send hb to peers [1 2 3 4 5] 543 544 544 544
[3] with lastIdx 550 send hb to peers [1 2 3 4 5] 549 549 549 549
[3] with lastIdx 555 send hb to peers [1 2 3 4 5] 554 554 555 554
[3] with lastIdx 561 send hb to peers [1 2 3 4 5] 560 560 560 560
read from clients 2
[3] with lastIdx 566 send hb to peers [1 2 3 4 5] 566 566 565 565
[3] with lastIdx 572 send hb to peers [1 2 3 4 5] 571 571 571 571
[3] with lastIdx 577 send hb to peers [1 2 3 4 5] 576 576 576 576
[3] with lastIdx 582 send hb to peers [1 2 3 4 5] 582 582 582 582
[3] with lastIdx 588 send hb to peers [1 2 3 4 5] 587 587 587 587
[3] with lastIdx 594 send hb to peers [1 2 3 4 5] 593 593 593 593
[3] with lastIdx 599 send hb to peers [1 2 3 4 5] 598 597 598 598
[3] with lastIdx 604 send hb to peers [1 2 3 4 5] 603 603 604 604
read from clients 3
[3] with lastIdx 609 send hb to peers [1 2 3 4 5] 608 608 608 608
[3] with lastIdx 614 send hb to peers [1 2 3 4 5] 614 614 614 614
[3] with lastIdx 619 send hb to peers [1 2 3 4 5] 618 619 619 619
[3] with lastIdx 624 send hb to peers [1 2 3 4 5] 623 624 624 623
[3] with lastIdx 630 send hb to peers [1 2 3 4 5] 629 629 629 629
[3] with lastIdx 635 send hb to peers [1 2 3 4 5] 634 634 634 634
[3] with lastIdx 641 send hb to peers [1 2 3 4 5] 640 640 640 640
[3] with lastIdx 647 send hb to peers [1 2 3 4 5] 646 646 646 646
[3] with lastIdx 652 send hb to peers [1 2 3 4 5] 651 651 651 651
read from clients 4
[3] with lastIdx 658 send hb to peers [1 2 3 4 5] 657 657 657 657
[3] with lastIdx 664 send hb to peers [1 2 3 4 5] 663 663 663 663
[3] with lastIdx 670 send hb to peers [1 2 3 4 5] 669 669 669 669
[3] with lastIdx 677 send hb to peers [1 2 3 4 5] 676 676 677 677
[3] with lastIdx 685 send hb to peers [1 2 3 4 5] 684 684 684 683
[3] with lastIdx 692 send hb to peers [1 2 3 4 5] 692 691 691 691
[3] with lastIdx 698 send hb to peers [1 2 3 4 5] 697 698 697 697
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 700 send hb to peers [1 2 3 4 5] 700 700 700 700
[3] with lastIdx 718 send hb to peers [1 2 3 4 5] 715 715 715 712
[3] with lastIdx 741 send hb to peers [1 2 3 4 5] 738 739 738 738
[3] with lastIdx 768 send hb to peers [1 2 3 4 5] 766 766 766 766
[3] with lastIdx 792 send hb to peers [1 2 3 4 5] 788 791 791 776
[3] with lastIdx 814 send hb to peers [1 2 3 4 5] 813 813 808 776
[3] with lastIdx 833 send hb to peers [1 2 3 4 5] 828 830 829 776
[3] with lastIdx 851 send hb to peers [1 2 3 4 5] 847 849 849 776
[3] with lastIdx 870 send hb to peers [1 2 3 4 5] 866 865 866 776
[3] with lastIdx 884 send hb to peers [1 2 3 4 5] 881 882 881 776
[5] receives snapshot from [3]
[3] with lastIdx 902 send hb to peers [1 2 3 4 5] 899 898 899 899
[3] with lastIdx 923 send hb to peers [1 2 3 4 5] 918 918 918 917
[3] with lastIdx 942 send hb to peers [1 2 3 4 5] 941 940 941 941
[3] with lastIdx 965 send hb to peers [1 2 3 4 5] 962 960 959 961
[3] with lastIdx 983 send hb to peers [1 2 3 4 5] 981 980 981 981
[3] with lastIdx 1005 send hb to peers [1 2 3 4 5] 1004 1004 1004 1004
[3] with lastIdx 1030 send hb to peers [1 2 3 4 5] 1026 1026 1016 1017
[3] with lastIdx 1054 send hb to peers [1 2 3 4 5] 1052 1052 1016 1017
[3] with lastIdx 1072 send hb to peers [1 2 3 4 5] 1070 1070 1016 1017
[3] with lastIdx 1093 send hb to peers [1 2 3 4 5] 1089 1089 1016 1017
[3] with lastIdx 1116 send hb to peers [1 2 3 4 5] 1114 1112 1016 1017
[3] with lastIdx 1140 send hb to peers [1 2 3 4 5] 1136 1135 1016 1017
[3] with lastIdx 1140 send hb to peers [1 2 3 4 5] 1136 1140 1016 1017
[5] receives snapshot from [3]
[3] with lastIdx 1140 send hb to peers [1 2 3 4 5] 1136 1140 1016 1017
[4] receives snapshot from [3]
[3] with lastIdx 1166 send hb to peers [1 2 3 4 5] 1136 1162 1165 1165
[3] with lastIdx 1192 send hb to peers [1 2 3 4 5] 1136 1186 1188 1189
[3] with lastIdx 1225 send hb to peers [1 2 3 4 5] 1136 1221 1220 1221
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[3] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1136 1246 1247 1252
[4] becomes leader
[1] receives snapshot from [4]
read from clients 0
[4] becomes leader
[4] with lastIdx 1264 send hb to peers [1 2 3 4 5] 1264 1264 1263 1263
[4] with lastIdx 1275 send hb to peers [1 2 3 4 5] 1274 1274 1274 1275
[4] with lastIdx 1285 send hb to peers [1 2 3 4 5] 1284 1284 1284 1284
[4] with lastIdx 1294 send hb to peers [1 2 3 4 5] 1293 1293 1293 1293
[4] with lastIdx 1304 send hb to peers [1 2 3 4 5] 1303 1303 1303 1303
read from clients 1
[4] with lastIdx 1315 send hb to peers [1 2 3 4 5] 1314 1313 1314 1314
[4] with lastIdx 1324 send hb to peers [1 2 3 4 5] 1323 1323 1324 1323
[4] with lastIdx 1333 send hb to peers [1 2 3 4 5] 1332 1332 1332 1332
[4] with lastIdx 1341 send hb to peers [1 2 3 4 5] 1340 1340 1340 1340
[4] with lastIdx 1349 send hb to peers [1 2 3 4 5] 1348 1348 1348 1348
[4] with lastIdx 1357 send hb to peers [1 2 3 4 5] 1356 1356 1356 1356
[4] with lastIdx 1365 send hb to peers [1 2 3 4 5] 1364 1364 1364 1365
read from clients 2
[4] with lastIdx 1372 send hb to peers [1 2 3 4 5] 1371 1371 1371 1371
[4] with lastIdx 1381 send hb to peers [1 2 3 4 5] 1380 1380 1380 1379
[4] with lastIdx 1388 send hb to peers [1 2 3 4 5] 1387 1387 1387 1387
[4] with lastIdx 1396 send hb to peers [1 2 3 4 5] 1395 1395 1395 1395
[4] with lastIdx 1404 send hb to peers [1 2 3 4 5] 1403 1403 1403 1403
[4] with lastIdx 1412 send hb to peers [1 2 3 4 5] 1411 1411 1411 1411
[4] with lastIdx 1421 send hb to peers [1 2 3 4 5] 1420 1420 1420 1420
read from clients 3
[4] with lastIdx 1431 send hb to peers [1 2 3 4 5] 1431 1431 1430 1430
[4] with lastIdx 1439 send hb to peers [1 2 3 4 5] 1438 1438 1438 1438
[4] with lastIdx 1446 send hb to peers [1 2 3 4 5] 1445 1446 1445 1446
[4] with lastIdx 1456 send hb to peers [1 2 3 4 5] 1455 1455 1455 1455
[4] with lastIdx 1464 send hb to peers [1 2 3 4 5] 1463 1463 1463 1463
[4] with lastIdx 1476 send hb to peers [1 2 3 4 5] 1476 1476 1476 1475
read from clients 4
[4] with lastIdx 1492 send hb to peers [1 2 3 4 5] 1491 1491 1491 1491
[4] with lastIdx 1509 send hb to peers [1 2 3 4 5] 1508 1508 1508 1508
[4] with lastIdx 1533 send hb to peers [1 2 3 4 5] 1533 1532 1533 1533
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1546 send hb to peers [1 2 3 4 5] 1546 1546 1546 1546
[4] with lastIdx 1562 send hb to peers [1 2 3 4 5] 1557 1557 1561 1557
[4] with lastIdx 1579 send hb to peers [1 2 3 4 5] 1577 1578 1578 1578
[4] with lastIdx 1601 send hb to peers [1 2 3 4 5] 1598 1598 1598 1598
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[4] with lastIdx 1611 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[1] becomes leader
[1] with lastIdx 1612 send hb to peers [1 2 3 4 5] 1246 1246 1246 1246
[1] with lastIdx 1617 send hb to peers [1 2 3 4 5] 1617 1246 1246 1246
[5] receives snapshot from [1]
[1] with lastIdx 1648 send hb to peers [1 2 3 4 5] 1639 1643 1648 1643
[1] with lastIdx 1681 send hb to peers [1 2 3 4 5] 1639 1679 1679 1643
[1] with lastIdx 1714 send hb to peers [1 2 3 4 5] 1639 1712 1712 1643
[1] with lastIdx 1744 send hb to peers [1 2 3 4 5] 1639 1741 1742 1643
[1] with lastIdx 1780 send hb to peers [1 2 3 4 5] 1639 1778 1778 1643
[1] with lastIdx 1830 send hb to peers [1 2 3 4 5] 1639 1826 1826 1643
[1] with lastIdx 1854 send hb to peers [1 2 3 4 5] 1639 1849 1854 1643
[4] becomes leader
[4] with lastIdx 1855 send hb to peers [1 2 3 4 5] 1611 1606 1606 1606
[2] receives snapshot from [4]
read from clients 0
[1] becomes leader
[1] with lastIdx 1869 send hb to peers [1 2 3 4 5] 1868 1868 1868 1793
[1] with lastIdx 1875 send hb to peers [1 2 3 4 5] 1874 1875 1874 1793
[1] with lastIdx 1884 send hb to peers [1 2 3 4 5] 1884 1884 1884 1793
[1] with lastIdx 1893 send hb to peers [1 2 3 4 5] 1893 1892 1892 1793
read from clients 1
[5] receives snapshot from [1]
[1] with lastIdx 1900 send hb to peers [1 2 3 4 5] 1900 1900 1900 1793
[1] with lastIdx 1907 send hb to peers [1 2 3 4 5] 1906 1906 1906 1906
[1] with lastIdx 1914 send hb to peers [1 2 3 4 5] 1913 1913 1913 1913
[1] with lastIdx 1921 send hb to peers [1 2 3 4 5] 1920 1920 1920 1920
[1] with lastIdx 1928 send hb to peers [1 2 3 4 5] 1927 1926 1927 1927
[1] with lastIdx 1935 send hb to peers [1 2 3 4 5] 1934 1933 1934 1933
read from clients 2
[1] with lastIdx 1942 send hb to peers [1 2 3 4 5] 1941 1941 1940 1941
[1] with lastIdx 1950 send hb to peers [1 2 3 4 5] 1949 1949 1949 1949
[1] with lastIdx 1957 send hb to peers [1 2 3 4 5] 1956 1955 1956 1956
[1] with lastIdx 1964 send hb to peers [1 2 3 4 5] 1963 1963 1963 1964
[1] with lastIdx 1972 send hb to peers [1 2 3 4 5] 1971 1971 1971 1971
read from clients 3
[1] with lastIdx 1981 send hb to peers [1 2 3 4 5] 1980 1980 1980 1980
[1] with lastIdx 1990 send hb to peers [1 2 3 4 5] 1989 1989 1989 1989
[1] with lastIdx 1999 send hb to peers [1 2 3 4 5] 1998 1998 1998 1998
read from clients 4
[1] with lastIdx 2012 send hb to peers [1 2 3 4 5] 2011 2010 2011 2011
[1] with lastIdx 2024 send hb to peers [1 2 3 4 5] 2023 2023 2023 2023
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2036 2036 2036 2036
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
[1] with lastIdx 2037 send hb to peers [1 2 3 4 5] 2037 2037 2037 2037
--- PASS: TestSnapshotUnreliableRecoverConcurrentPartition2C (35.58s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	35.715s
