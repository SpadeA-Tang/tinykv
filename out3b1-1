GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestSnapshotUnreliableRecoverConcurrentPartition2C|| true
=== RUN   TestSnapshotUnreliableRecoverConcurrentPartition2C
[1] becomes leader
[1] with lastIdx 6 send hb to peers [3 4 5 1 2] 6 6 6 6
[1] with lastIdx 6 send hb to peers [3 4 5 1 2] 6 6 6 6
[1] with lastIdx 6 send hb to peers [3 4 5 1 2] 6 6 6 6
[1] with lastIdx 6 send hb to peers [3 4 5 1 2] 6 6 6 6
[1] with lastIdx 6 send hb to peers [3 4 5 1 2] 6 6 6 6
[1] with lastIdx 25 send hb to peers [3 4 5 1 2] 22 22 22 22
[1] with lastIdx 39 send hb to peers [3 4 5 1 2] 35 37 35 35
[1] with lastIdx 55 send hb to peers [3 4 5 1 2] 52 52 52 52
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] becomes leader
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 53 send hb to peers [3 4 5 1 2] 53 5 5 5
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 53 send hb to peers [3 4 5 1 2] 53 53 5 5
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 53 send hb to peers [3 4 5 1 2] 53 53 5 5
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 53 send hb to peers [3 4 5 1 2] 53 53 5 5
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 53 send hb to peers [3 4 5 1 2] 53 53 5 5
[1] with lastIdx 57 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 56 send hb to peers [3 4 5 1 2] 55 54 5 55
[1] with lastIdx 58 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 80 send hb to peers [3 4 5 1 2] 77 77 5 77
[1] with lastIdx 59 send hb to peers [3 4 5 1 2] 52 52 52 57
[3] with lastIdx 104 send hb to peers [3 4 5 1 2] 102 101 5 101
[3] with lastIdx 144 send hb to peers [3 4 5 1 2] 103 103 140 141
[3] with lastIdx 182 send hb to peers [3 4 5 1 2] 103 103 179 181
[3] with lastIdx 219 send hb to peers [3 4 5 1 2] 103 103 215 215
[3] with lastIdx 251 send hb to peers [3 4 5 1 2] 103 103 248 249
[3] with lastIdx 285 send hb to peers [3 4 5 1 2] 103 103 284 284
[3] with lastIdx 303 send hb to peers [3 4 5 1 2] 103 103 301 301
[5] receives snapshot from [3]
[3] with lastIdx 324 send hb to peers [3 4 5 1 2] 103 321 320 320
[3] with lastIdx 340 send hb to peers [3 4 5 1 2] 103 339 339 338
[3] with lastIdx 360 send hb to peers [3 4 5 1 2] 103 355 357 357
[3] with lastIdx 380 send hb to peers [3 4 5 1 2] 103 377 374 375
[3] with lastIdx 399 send hb to peers [3 4 5 1 2] 103 394 397 398
[3] with lastIdx 422 send hb to peers [3 4 5 1 2] 103 417 417 419
[3] with lastIdx 432 send hb to peers [3 4 5 1 2] 103 427 430 427
[3] with lastIdx 432 send hb to peers [3 4 5 1 2] 103 427 432 427
[3] with lastIdx 432 send hb to peers [3 4 5 1 2] 103 427 432 427
[3] with lastIdx 432 send hb to peers [3 4 5 1 2] 103 427 432 427
[3] with lastIdx 432 send hb to peers [3 4 5 1 2] 103 427 432 427
[1] becomes leader
[1] with lastIdx 433 send hb to peers [3 4 5 1 2] 52 52 52 57
[1] with lastIdx 438 send hb to peers [3 4 5 1 2] 438 52 52 57
[1] with lastIdx 438 send hb to peers [3 4 5 1 2] 438 52 52 57
[1] with lastIdx 438 send hb to peers [3 4 5 1 2] 438 52 52 438
[1] with lastIdx 438 send hb to peers [3 4 5 1 2] 438 52 52 438
read from clients 0
[1] becomes leader
[4] receives snapshot from [1]
[1] with lastIdx 458 send hb to peers [3 4 5 1 2] 457 457 457 457
[1] with lastIdx 475 send hb to peers [3 4 5 1 2] 474 474 474 474
[1] with lastIdx 487 send hb to peers [3 4 5 1 2] 486 487 487 486
read from clients 1
[1] with lastIdx 496 send hb to peers [3 4 5 1 2] 495 495 495 495
[1] with lastIdx 504 send hb to peers [3 4 5 1 2] 503 503 504 503
[1] with lastIdx 513 send hb to peers [3 4 5 1 2] 512 512 512 512
[1] with lastIdx 520 send hb to peers [3 4 5 1 2] 519 519 519 519
[1] with lastIdx 528 send hb to peers [3 4 5 1 2] 527 527 527 527
[1] with lastIdx 534 send hb to peers [3 4 5 1 2] 534 533 534 533
read from clients 2
[1] with lastIdx 541 send hb to peers [3 4 5 1 2] 540 540 540 540
[1] with lastIdx 547 send hb to peers [3 4 5 1 2] 546 546 546 546
[1] with lastIdx 554 send hb to peers [3 4 5 1 2] 553 553 553 553
[1] with lastIdx 561 send hb to peers [3 4 5 1 2] 560 560 560 560
[1] with lastIdx 566 send hb to peers [3 4 5 1 2] 565 565 565 565
[1] with lastIdx 571 send hb to peers [3 4 5 1 2] 570 570 570 570
read from clients 3
[1] with lastIdx 576 send hb to peers [3 4 5 1 2] 575 575 575 575
[1] with lastIdx 582 send hb to peers [3 4 5 1 2] 580 581 581 581
[1] with lastIdx 586 send hb to peers [3 4 5 1 2] 586 586 585 585
[1] with lastIdx 591 send hb to peers [3 4 5 1 2] 590 590 590 591
[1] with lastIdx 597 send hb to peers [3 4 5 1 2] 596 596 596 595
[1] with lastIdx 602 send hb to peers [3 4 5 1 2] 601 601 601 601
[1] with lastIdx 608 send hb to peers [3 4 5 1 2] 607 607 607 607
[1] with lastIdx 612 send hb to peers [3 4 5 1 2] 612 612 612 612
[1] with lastIdx 617 send hb to peers [3 4 5 1 2] 617 617 616 616
read from clients 4
[1] with lastIdx 622 send hb to peers [3 4 5 1 2] 622 622 622 621
[1] with lastIdx 627 send hb to peers [3 4 5 1 2] 626 626 626 626
[1] with lastIdx 632 send hb to peers [3 4 5 1 2] 631 631 631 631
[1] with lastIdx 637 send hb to peers [3 4 5 1 2] 636 637 636 636
[1] with lastIdx 642 send hb to peers [3 4 5 1 2] 642 642 641 641
[1] with lastIdx 648 send hb to peers [3 4 5 1 2] 647 647 647 647
[1] with lastIdx 655 send hb to peers [3 4 5 1 2] 654 655 655 654
[1] with lastIdx 662 send hb to peers [3 4 5 1 2] 661 661 661 661
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 665 send hb to peers [3 4 5 1 2] 665 665 665 665
[1] with lastIdx 680 send hb to peers [3 4 5 1 2] 676 675 675 675
[1] with lastIdx 696 send hb to peers [3 4 5 1 2] 695 695 695 695
[1] with lastIdx 717 send hb to peers [3 4 5 1 2] 712 712 712 712
[1] with lastIdx 740 send hb to peers [3 4 5 1 2] 727 736 737 727
[1] with lastIdx 759 send hb to peers [3 4 5 1 2] 727 757 754 727
[1] with lastIdx 778 send hb to peers [3 4 5 1 2] 727 778 777 727
[1] with lastIdx 802 send hb to peers [3 4 5 1 2] 727 801 800 727
[1] with lastIdx 824 send hb to peers [3 4 5 1 2] 727 820 820 727
[1] with lastIdx 842 send hb to peers [3 4 5 1 2] 727 839 842 727
[1] with lastIdx 861 send hb to peers [3 4 5 1 2] 727 857 856 727
[1] with lastIdx 867 send hb to peers [3 4 5 1 2] 727 863 862 727
[1] with lastIdx 867 send hb to peers [3 4 5 1 2] 727 863 862 727
[1] becomes leader
[2] receives snapshot from [1]
[1] with lastIdx 889 send hb to peers [3 4 5 1 2] 727 863 887 887
[1] with lastIdx 909 send hb to peers [3 4 5 1 2] 727 863 906 906
[1] with lastIdx 930 send hb to peers [3 4 5 1 2] 727 863 929 929
[1] with lastIdx 959 send hb to peers [3 4 5 1 2] 727 863 956 957
[1] with lastIdx 969 send hb to peers [3 4 5 1 2] 727 863 963 969
[5] becomes leader
[3] receives snapshot from [5]
[5] with lastIdx 965 send hb to peers [3 4 5 1 2] 338 338 338 338
[4] receives snapshot from [5]
[5] with lastIdx 1001 send hb to peers [3 4 5 1 2] 998 998 338 338
[5] with lastIdx 1029 send hb to peers [3 4 5 1 2] 1026 1026 338 338
[5] with lastIdx 1059 send hb to peers [3 4 5 1 2] 1055 1056 338 338
[5] becomes leader
[1] receives snapshot from [5]
[5] with lastIdx 1064 send hb to peers [3 4 5 1 2] 1064 1064 1064 1064
[5] with lastIdx 1064 send hb to peers [3 4 5 1 2] 1064 1064 1064 1064
[5] with lastIdx 1064 send hb to peers [3 4 5 1 2] 1064 1064 1064 1064
[5] with lastIdx 1064 send hb to peers [3 4 5 1 2] 1064 1064 1064 1064
[5] with lastIdx 1064 send hb to peers [3 4 5 1 2] 1064 1064 1064 1064
read from clients 0
[2] becomes leader
[2] with lastIdx 1081 send hb to peers [3 4 5 1 2] 1081 1081 1080 1081
[2] with lastIdx 1099 send hb to peers [3 4 5 1 2] 1098 1098 1098 1098
read from clients 1
[2] with lastIdx 1115 send hb to peers [3 4 5 1 2] 1115 1115 1115 1114
[2] with lastIdx 1133 send hb to peers [3 4 5 1 2] 1132 1132 1132 1132
read from clients 2
[2] with lastIdx 1151 send hb to peers [3 4 5 1 2] 1151 1151 1151 1151
[2] with lastIdx 1170 send hb to peers [3 4 5 1 2] 1170 1169 1169 1169
read from clients 3
[2] with lastIdx 1189 send hb to peers [3 4 5 1 2] 1188 1188 1188 1188
[2] with lastIdx 1208 send hb to peers [3 4 5 1 2] 1207 1207 1207 1207
read from clients 4
[2] with lastIdx 1227 send hb to peers [3 4 5 1 2] 1226 1227 1226 1226
[2] with lastIdx 1245 send hb to peers [3 4 5 1 2] 1244 1244 1244 1244
[2] with lastIdx 1257 send hb to peers [3 4 5 1 2] 1257 1257 1257 1257
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1258 send hb to peers [3 4 5 1 2] 1258 1258 1258 1258
[2] with lastIdx 1284 send hb to peers [3 4 5 1 2] 1282 1280 1282 1282
[2] with lastIdx 1308 send hb to peers [3 4 5 1 2] 1303 1305 1303 1305
[2] with lastIdx 1330 send hb to peers [3 4 5 1 2] 1326 1326 1326 1326
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] becomes leader
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1062 1062 1062 1062
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1062 1062 1062 1062
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1062 1062 1062 1062
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] with lastIdx 1335 send hb to peers [3 4 5 1 2] 1062 1331 1062 1062
[2] with lastIdx 1331 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] with lastIdx 1355 send hb to peers [3 4 5 1 2] 1351 1351 1352 1062
[2] with lastIdx 1332 send hb to peers [3 4 5 1 2] 1326 1326 1326 1331
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1370 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1372 send hb to peers [3 4 5 1 2] 1368 1368 1372 1062
[4] with lastIdx 1461 send hb to peers [3 4 5 1 2] 1368 1460 1372 1460
[4] with lastIdx 1536 send hb to peers [3 4 5 1 2] 1368 1535 1372 1534
[4] with lastIdx 1594 send hb to peers [3 4 5 1 2] 1368 1590 1372 1590
[4] with lastIdx 1636 send hb to peers [3 4 5 1 2] 1368 1634 1372 1635
[4] with lastIdx 1679 send hb to peers [3 4 5 1 2] 1368 1678 1372 1677
[3] receives snapshot from [4]
[1] receives snapshot from [4]
[4] with lastIdx 1704 send hb to peers [3 4 5 1 2] 1701 1700 1372 1701
[4] with lastIdx 1729 send hb to peers [3 4 5 1 2] 1725 1726 1726 1724
[4] with lastIdx 1753 send hb to peers [3 4 5 1 2] 1750 1749 1750 1748
[4] with lastIdx 1771 send hb to peers [3 4 5 1 2] 1767 1768 1768 1768
[4] with lastIdx 1787 send hb to peers [3 4 5 1 2] 1786 1787 1786 1785
[4] with lastIdx 1803 send hb to peers [3 4 5 1 2] 1802 1800 1798 1801
[4] with lastIdx 1808 send hb to peers [3 4 5 1 2] 1803 1802 1808 1803
[4] with lastIdx 1808 send hb to peers [3 4 5 1 2] 1803 1802 1808 1803
[4] with lastIdx 1808 send hb to peers [3 4 5 1 2] 1803 1802 1808 1803
[4] with lastIdx 1808 send hb to peers [3 4 5 1 2] 1803 1802 1808 1803
[4] with lastIdx 1808 send hb to peers [3 4 5 1 2] 1803 1802 1808 1803
[4] becomes leader
[4] with lastIdx 1827 send hb to peers [3 4 5 1 2] 1803 1822 1808 1822
[4] with lastIdx 1842 send hb to peers [3 4 5 1 2] 1803 1840 1808 1839
[4] with lastIdx 1861 send hb to peers [3 4 5 1 2] 1803 1859 1808 1858
[4] with lastIdx 1879 send hb to peers [3 4 5 1 2] 1803 1874 1808 1874
[4] with lastIdx 1899 send hb to peers [3 4 5 1 2] 1803 1895 1808 1895
[4] with lastIdx 1912 send hb to peers [3 4 5 1 2] 1803 1910 1808 1910
[2] becomes leader
[3] receives snapshot from [2]
read from clients 0
[4] becomes leader
[4] with lastIdx 1930 send hb to peers [3 4 5 1 2] 1929 1929 1836 1929
[4] with lastIdx 1936 send hb to peers [3 4 5 1 2] 1935 1935 1836 1935
[4] with lastIdx 1941 send hb to peers [3 4 5 1 2] 1940 1940 1836 1940
[1] receives snapshot from [4]
[4] with lastIdx 1946 send hb to peers [3 4 5 1 2] 1946 1946 1946 1946
[4] with lastIdx 1953 send hb to peers [3 4 5 1 2] 1952 1952 1952 1952
[4] with lastIdx 1961 send hb to peers [3 4 5 1 2] 1960 1960 1960 1960
[4] with lastIdx 1970 send hb to peers [3 4 5 1 2] 1970 1970 1970 1970
[4] with lastIdx 1982 send hb to peers [3 4 5 1 2] 1981 1981 1981 1981
[4] with lastIdx 1991 send hb to peers [3 4 5 1 2] 1990 1990 1990 1990
read from clients 1
[4] with lastIdx 2002 send hb to peers [3 4 5 1 2] 2001 2001 2001 2001
[4] with lastIdx 2018 send hb to peers [3 4 5 1 2] 2017 2017 2017 2017
[4] with lastIdx 2034 send hb to peers [3 4 5 1 2] 2033 2033 2033 2033
[4] with lastIdx 2047 send hb to peers [3 4 5 1 2] 2047 2047 2047 2047
[4] with lastIdx 2060 send hb to peers [3 4 5 1 2] 2059 2059 2059 2059
read from clients 2
[4] with lastIdx 2075 send hb to peers [3 4 5 1 2] 2074 2074 2074 2074
[4] with lastIdx 2089 send hb to peers [3 4 5 1 2] 2088 2088 2088 2088
[4] with lastIdx 2102 send hb to peers [3 4 5 1 2] 2101 2101 2101 2101
[4] with lastIdx 2110 send hb to peers [3 4 5 1 2] 2109 2109 2109 2109
read from clients 3
[4] with lastIdx 2123 send hb to peers [3 4 5 1 2] 2122 2122 2122 2122
[4] with lastIdx 2134 send hb to peers [3 4 5 1 2] 2133 2133 2133 2133
[4] with lastIdx 2158 send hb to peers [3 4 5 1 2] 2157 2157 2157 2157
read from clients 4
[4] with lastIdx 2192 send hb to peers [3 4 5 1 2] 2191 2191 2191 2191
[4] with lastIdx 2226 send hb to peers [3 4 5 1 2] 2225 2226 2225 2225
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
[4] with lastIdx 2241 send hb to peers [3 4 5 1 2] 2241 2241 2241 2241
--- PASS: TestSnapshotUnreliableRecoverConcurrentPartition2C (33.03s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	33.115s
