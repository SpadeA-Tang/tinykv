GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestConfChangeSnapshotUnreliableRecoverConcurrentPartition3B|| true
=== RUN   TestConfChangeSnapshotUnreliableRecoverConcurrentPartition3B
[4] becomes leader
[4] with lastIdx 6 send hb to peers [1 2 3 4 5]  6  6  6  6
[4] with lastIdx 6 send hb to peers [1 2 3 4 5]  6  6  6  6
[4] with lastIdx 6 send hb to peers [1 2 3 4 5]  6  6  6  6
[4] propose cmd Put potential next index 7 with key 4 00000000 with value x 4 0 y
[4] propose cmd Put potential next index 8 with key 1 00000000 with value x 1 0 y
[4] propose cmd Put potential next index 9 with key 2 00000000 with value x 2 0 y
[4] propose cmd Put potential next index 10 with key 3 00000000 with value x 3 0 y
[4] propose cmd Put potential next index 11 with key 0 00000000 with value x 0 0 y
[4] has put key 4 00000000 value x 4 0 y
[3] has put key 4 00000000 value x 4 0 y
[4] entry index 7 current proposal:  8 9 10 11
[5] has put key 4 00000000 value x 4 0 y
[4] propose cmd Put potential next index 12 with key 4 00000001 with value x 4 1 y
[4] has put key 1 00000000 value x 1 0 y
[1] has put key 4 00000000 value x 4 0 y
[3] has put key 1 00000000 value x 1 0 y
[2] has put key 4 00000000 value x 4 0 y
[4] entry index 8 current proposal:  9 10 11 12
[4] has put key 2 00000000 value x 2 0 y
[1] has put key 1 00000000 value x 1 0 y
[3] has put key 2 00000000 value x 2 0 y
[5] has put key 1 00000000 value x 1 0 y
[4] entry index 9 current proposal:  10 11 12
[4] has put key 3 00000000 value x 3 0 y
[2] has put key 1 00000000 value x 1 0 y
[1] has put key 2 00000000 value x 2 0 y
[3] has put key 3 00000000 value x 3 0 y
[5] has put key 2 00000000 value x 2 0 y
[2] has put key 2 00000000 value x 2 0 y
[1] has put key 3 00000000 value x 3 0 y
[4] entry index 10 current proposal:  11 12
[4] has put key 0 00000000 value x 0 0 y
[3] has put key 0 00000000 value x 0 0 y
[2] has put key 3 00000000 value x 3 0 y
[1] has put key 0 00000000 value x 0 0 y
[5] has put key 3 00000000 value x 3 0 y
[4] entry index 11 current proposal:  12
[2] has put key 0 00000000 value x 0 0 y
[5] has put key 0 00000000 value x 0 0 y
[4] propose cmd Put potential next index 13 with key 1 00000001 with value x 1 1 y
[4] propose cmd Snap potential next index 14
[4] propose cmd Snap potential next index 15
[4] propose cmd Put potential next index 16 with key 0 00000001 with value x 0 1 y
[4] has put key 4 00000001 value x 4 1 y
[1] has put key 4 00000001 value x 4 1 y
[4] entry index 12 current proposal:  13 14 15 16
[5] has put key 4 00000001 value x 4 1 y
[3] has put key 4 00000001 value x 4 1 y
[4] propose cmd Put potential next index 17 with key 4 00000002 with value x 4 2 y
[2] has put key 4 00000001 value x 4 1 y
[4] has put key 1 00000001 value x 1 1 y
[4] entry index 13 current proposal:  14 15 16 17
[4] entry index 14 current proposal:  15 16 17
[4] entry index 15 current proposal:  16 17
[4] has put key 0 00000001 value x 0 1 y
[1] has put key 1 00000001 value x 1 1 y
[5] has put key 1 00000001 value x 1 1 y
[3] has put key 1 00000001 value x 1 1 y
[4] entry index 16 current proposal:  17
[1] has put key 0 00000001 value x 0 1 y
[2] has put key 1 00000001 value x 1 1 y
[3] has put key 0 00000001 value x 0 1 y
[5] has put key 0 00000001 value x 0 1 y
[4] propose cmd Put potential next index 18 with key 3 00000001 with value x 3 1 y
[4] propose cmd Put potential next index 19 with key 2 00000001 with value x 2 1 y
[4] propose cmd Snap potential next index 20
[4] propose cmd Snap potential next index 21
[2] has put key 0 00000001 value x 0 1 y
[4] has put key 4 00000002 value x 4 2 y
[4] entry index 17 current proposal:  18 19 20 21
[1] has put key 4 00000002 value x 4 2 y
[3] has put key 4 00000002 value x 4 2 y
[5] has put key 4 00000002 value x 4 2 y
[4] propose cmd Put potential next index 22 with key 4 00000003 with value x 4 3 y
[2] has put key 4 00000002 value x 4 2 y
[4] has put key 3 00000001 value x 3 1 y
[4] entry index 18 current proposal:  19 20 21 22
[4] has put key 2 00000001 value x 2 1 y
[1] has put key 3 00000001 value x 3 1 y
[5] has put key 3 00000001 value x 3 1 y
[3] has put key 3 00000001 value x 3 1 y
[1] has put key 2 00000001 value x 2 1 y
[4] entry index 19 current proposal:  20 21 22
[4] entry index 20 current proposal:  21 22
[4] entry index 21 current proposal:  22
[5] has put key 2 00000001 value x 2 1 y
[3] has put key 2 00000001 value x 2 1 y
[4] propose cmd Snap potential next index 23
[4] propose cmd Put potential next index 24 with key 1 00000002 with value x 1 2 y
[4] propose cmd Snap potential next index 25
[4] propose cmd Put potential next index 26 with key 2 00000002 with value x 2 2 y
[4] has put key 4 00000003 value x 4 3 y
[2] has put key 3 00000001 value x 3 1 y
[4] entry index 22 current proposal:  23 24 25 26
[5] has put key 4 00000003 value x 4 3 y
[1] has put key 4 00000003 value x 4 3 y
[3] has put key 4 00000003 value x 4 3 y
[2] has put key 2 00000001 value x 2 1 y
[4] with lastIdx 26 send hb to peers [1 2 3 4 5]  22  22  22  22
[4] propose cmd Put potential next index 27 with key 4 00000004 with value x 4 4 y
[4] entry index 23 current proposal:  24 25 26 27
[4] has put key 1 00000002 value x 1 2 y
[2] has put key 4 00000003 value x 4 3 y
[4] entry index 24 current proposal:  25 26 27
[4] entry index 25 current proposal:  26 27
[4] has put key 2 00000002 value x 2 2 y
[3] has put key 1 00000002 value x 1 2 y
[5] has put key 1 00000002 value x 1 2 y
[1] has put key 1 00000002 value x 1 2 y
[4] entry index 26 current proposal:  27
[5] has put key 2 00000002 value x 2 2 y
[3] has put key 2 00000002 value x 2 2 y
[4] propose cmd Put potential next index 28 with key 3 00000002 with value x 3 2 y
[4] propose cmd Snap potential next index 29
[4] propose cmd Snap potential next index 30
[4] propose cmd Snap potential next index 31
[1] has put key 2 00000002 value x 2 2 y
[4] has put key 4 00000004 value x 4 4 y
[2] has put key 1 00000002 value x 1 2 y
[4] entry index 27 current proposal:  28 29 30 31
[2] has put key 2 00000002 value x 2 2 y
[5] has put key 4 00000004 value x 4 4 y
[3] has put key 4 00000004 value x 4 4 y
[1] has put key 4 00000004 value x 4 4 y
[4] propose cmd Put potential next index 32 with key 4 00000005 with value x 4 5 y
[4] has put key 3 00000002 value x 3 2 y
[2] has put key 4 00000004 value x 4 4 y
[4] entry index 28 current proposal:  29 30 31 32
[4] entry index 29 current proposal:  30 31 32
[4] entry index 30 current proposal:  31 32
[4] entry index 31 current proposal:  32
[1] has put key 3 00000002 value x 3 2 y
[5] has put key 3 00000002 value x 3 2 y
[3] has put key 3 00000002 value x 3 2 y
[4] with lastIdx 32 send hb to peers [1 2 3 4 5]  31  27  31  31
[4] propose cmd Snap potential next index 33
[4] propose cmd Put potential next index 34 with key 0 00000002 with value x 0 2 y
[4] propose cmd Put potential next index 35 with key 1 00000003 with value x 1 3 y
[4] propose cmd Snap potential next index 36
[4] has put key 4 00000005 value x 4 5 y
[4] entry index 32 current proposal:  33 34 35 36
[1] has put key 4 00000005 value x 4 5 y
[4] propose cmd Put potential next index 37 with key 4 00000006 with value x 4 6 y
[5] has put key 4 00000005 value x 4 5 y
[3] has put key 4 00000005 value x 4 5 y
[2] has put key 3 00000002 value x 3 2 y
[4] with lastIdx 37 send hb to peers [1 2 3 4 5]  36  36  36  36
[4] entry index 33 current proposal:  34 35 36 37
[4] has put key 0 00000002 value x 0 2 y
[2] has put key 4 00000005 value x 4 5 y
[4] entry index 34 current proposal:  35 36 37
[4] has put key 1 00000003 value x 1 3 y
[3] has put key 0 00000002 value x 0 2 y
[4] entry index 35 current proposal:  36 37
[4] entry index 36 current proposal:  37
[3] has put key 1 00000003 value x 1 3 y
[4] propose cmd Put potential next index 38 with key 3 00000003 with value x 3 3 y
[4] propose cmd Put potential next index 39 with key 0 00000003 with value x 0 3 y
[4] propose cmd Snap potential next index 40
[4] propose cmd Snap potential next index 41
[2] has put key 0 00000002 value x 0 2 y
[5] has put key 0 00000002 value x 0 2 y
[4] has put key 4 00000006 value x 4 6 y
[5] has put key 1 00000003 value x 1 3 y
[2] has put key 1 00000003 value x 1 3 y
[4] entry index 37 current proposal:  38 39 40 41
[3] has put key 4 00000006 value x 4 6 y
[4] propose cmd Snap potential next index 42
[4] with lastIdx 42 send hb to peers [1 2 3 4 5]  36  37  37  37
[4] propose cmd ChangePeer potential next index 43
[5] has put key 4 00000006 value x 4 6 y
[2] has put key 4 00000006 value x 4 6 y
[4] has put key 3 00000003 value x 3 3 y
[4] entry index 38 current proposal:  39 40 41 42
[4] has put key 0 00000003 value x 0 3 y
[3] has put key 3 00000003 value x 3 3 y
[5] has put key 3 00000003 value x 3 3 y
[4] entry index 39 current proposal:  40 41 42
[4] entry index 40 current proposal:  41 42
[4] entry index 41 current proposal:  42
[3] has put key 0 00000003 value x 0 3 y
[5] has put key 0 00000003 value x 0 3 y
[4] propose cmd Put potential next index 44 with key 3 00000004 with value x 3 4 y
[4] propose cmd Snap potential next index 45
[4] propose cmd Put potential next index 46 with key 1 00000004 with value x 1 4 y
[4] propose cmd Snap potential next index 47
[4] entry index 42 current proposal:  44 45 46 47
[2] has put key 3 00000003 value x 3 3 y
[4] propose cmd Snap potential next index 48
[4] with lastIdx 48 send hb to peers [2 3 4 5]  43  42  43
[2] has put key 0 00000003 value x 0 3 y
[4] propose cmd ChangePeer potential next index 49
[4] has put key 3 00000004 value x 3 4 y
[4] entry index 44 current proposal:  45 46 47 48
[4] entry index 45 current proposal:  46 47 48
[4] has put key 1 00000004 value x 1 4 y
[4] entry index 46 current proposal:  47 48
[4] entry index 47 current proposal:  48
[4] propose cmd Snap potential next index 50
[4] propose cmd Put potential next index 51 with key 0 00000004 with value x 0 4 y
[4] propose cmd Snap potential next index 52
[4] propose cmd Put potential next index 53 with key 2 00000003 with value x 2 3 y
[3] has put key 3 00000004 value x 3 4 y
[5] has put key 3 00000004 value x 3 4 y
[3] has put key 1 00000004 value x 1 4 y
[5] has put key 1 00000004 value x 1 4 y
[4] entry index 48 current proposal:  50 51 52 53
[2] has put key 3 00000004 value x 3 4 y
[4] propose cmd Snap potential next index 54
[2] has put key 1 00000004 value x 1 4 y
[4] with lastIdx 54 send hb to peers [2 3 4 5]  51  49  53
[4] entry index 50 current proposal:  51 52 53 54
[4] has put key 0 00000004 value x 0 4 y
[4] entry index 51 current proposal:  52 53 54
[4] entry index 52 current proposal:  53 54
[4] has put key 2 00000003 value x 2 3 y
[3] has put key 0 00000004 value x 0 4 y
[5] has put key 0 00000004 value x 0 4 y
[3] has put key 2 00000003 value x 2 3 y
[4] entry index 53 current proposal:  54
[4] propose cmd ChangePeer potential next index 55
[4] propose cmd Put potential next index 55 with key 3 00000005 with value x 3 5 y
[4] propose cmd Snap potential next index 56
[4] propose cmd Snap potential next index 57
[4] propose cmd Snap potential next index 58
[5] has put key 2 00000003 value x 2 3 y
[4] entry index 54 current proposal:  55 56 57 58
[4] propose cmd Put potential next index 59 with key 4 00000007 with value x 4 7 y
[2] has put key 0 00000004 value x 0 4 y
[2] has put key 2 00000003 value x 2 3 y
[4] has put key 3 00000005 value x 3 5 y
[3] has put key 3 00000005 value x 3 5 y
[4] entry index 55 current proposal:  56 57 58 59
[4] entry index 56 current proposal:  57 58 59
[4] entry index 57 current proposal:  58 59
[4] entry index 58 current proposal:  59
[2] has put key 3 00000005 value x 3 5 y
[4] propose cmd Put potential next index 60 with key 3 00000006 with value x 3 6 y
[4] propose cmd Put potential next index 61 with key 1 00000005 with value x 1 5 y
[4] propose cmd Snap potential next index 62
[4] propose cmd Snap potential next index 63
[4] with lastIdx 63 send hb to peers [2 3 4 5]  58  59  58
[4] has put key 4 00000007 value x 4 7 y
[5] has put key 3 00000005 value x 3 5 y
[4] entry index 59 current proposal:  60 61 62 63
[4] propose cmd ChangePeer potential next index 64
[4] propose cmd Snap potential next index 64
[3] has put key 4 00000007 value x 4 7 y
[2] has put key 4 00000007 value x 4 7 y
[4] has put key 3 00000006 value x 3 6 y
[5] has put key 4 00000007 value x 4 7 y
[4] entry index 60 current proposal:  61 62 63 64
[4] has put key 1 00000005 value x 1 5 y
[2] has put key 3 00000006 value x 3 6 y
[3] has put key 3 00000006 value x 3 6 y
[4] entry index 61 current proposal:  62 63 64
[4] entry index 62 current proposal:  63 64
[4] entry index 63 current proposal:  64
[2] has put key 1 00000005 value x 1 5 y
[3] has put key 1 00000005 value x 1 5 y
[4] propose cmd Put potential next index 65 with key 3 00000007 with value x 3 7 y
[4] propose cmd Put potential next index 66 with key 2 00000004 with value x 2 4 y
[4] propose cmd Put potential next index 67 with key 1 00000006 with value x 1 6 y
[4] propose cmd Put potential next index 68 with key 0 00000005 with value x 0 5 y
[5] has put key 3 00000006 value x 3 6 y
[4] entry index 64 current proposal:  65 66 67 68
[5] has put key 1 00000005 value x 1 5 y
[4] propose cmd Snap potential next index 69
[4] has put key 3 00000007 value x 3 7 y
[4] entry index 65 current proposal:  66 67 68 69
[4] has put key 2 00000004 value x 2 4 y
[3] has put key 3 00000007 value x 3 7 y
[2] has put key 3 00000007 value x 3 7 y
[4] entry index 66 current proposal:  67 68 69
[4] has put key 1 00000006 value x 1 6 y
[3] has put key 2 00000004 value x 2 4 y
[2] has put key 2 00000004 value x 2 4 y
[4] entry index 67 current proposal:  68 69
[4] has put key 0 00000005 value x 0 5 y
[3] has put key 1 00000006 value x 1 6 y
[2] has put key 1 00000006 value x 1 6 y
[4] entry index 68 current proposal:  69
[3] has put key 0 00000005 value x 0 5 y
[2] has put key 0 00000005 value x 0 5 y
[4] propose cmd Put potential next index 70 with key 3 00000008 with value x 3 8 y
[4] propose cmd Snap potential next index 71
[4] propose cmd Put potential next index 72 with key 1 00000007 with value x 1 7 y
[4] propose cmd Snap potential next index 73
[4] entry index 69 current proposal:  70 71 72 73
[5] has put key 3 00000007 value x 3 7 y
[4] with lastIdx 73 send hb to peers [2 3 4 5]  69  68  69
[4] propose cmd Snap potential next index 74
[5] has put key 2 00000004 value x 2 4 y
[4] propose cmd ChangePeer potential next index 75
[5] has put key 1 00000006 value x 1 6 y
[4] has put key 3 00000008 value x 3 8 y
[5] has put key 0 00000005 value x 0 5 y
[4] entry index 70 current proposal:  71 72 73 74
[4] entry index 71 current proposal:  72 73 74
[3] has put key 3 00000008 value x 3 8 y
[2] has put key 3 00000008 value x 3 8 y
[4] propose cmd Put potential next index 75 with key 3 00000009 with value x 3 9 y
[4] propose cmd Put potential next index 76 with key 2 00000005 with value x 2 5 y
[4] has put key 1 00000007 value x 1 7 y
[5] has put key 3 00000008 value x 3 8 y
[2] has put key 1 00000007 value x 1 7 y
[4] entry index 72 current proposal:  73 74 75 76
[4] entry index 73 current proposal:  74 75 76
[3] has put key 1 00000007 value x 1 7 y
[4] propose cmd Snap potential next index 77
[4] propose cmd Snap potential next index 78
[4] entry index 74 current proposal:  75 76 77 78
[5] has put key 1 00000007 value x 1 7 y
[4] propose cmd Snap potential next index 79
[4] has put key 3 00000009 value x 3 9 y
[4] entry index 75 current proposal:  76 77 78 79
[4] has put key 2 00000005 value x 2 5 y
[2] has put key 3 00000009 value x 3 9 y
[5] has put key 3 00000009 value x 3 9 y
[4] entry index 76 current proposal:  77 78 79
[2] has put key 2 00000005 value x 2 5 y
[5] has put key 2 00000005 value x 2 5 y
[4] propose cmd Put potential next index 80 with key 3 00000010 with value x 3 10 y
[4] propose cmd Put potential next index 81 with key 2 00000006 with value x 2 6 y
[4] with lastIdx 81 send hb to peers [2 3 4 5]  79  76  78
[4] entry index 77 current proposal:  78 79 80 81
[4] entry index 78 current proposal:  79 80 81
[4] propose cmd ChangePeer potential next index 82
[4] propose cmd Put potential next index 82 with key 1 00000008 with value x 1 8 y
[4] propose cmd Put potential next index 83 with key 0 00000006 with value x 0 6 y
[4] entry index 79 current proposal:  80 81 82 83
[4] has put key 3 00000010 value x 3 10 y
[4] entry index 80 current proposal:  81 82 83
[2] has put key 3 00000010 value x 3 10 y
[4] propose cmd Snap potential next index 84
[4] propose cmd Snap potential next index 85
[5] has put key 3 00000010 value x 3 10 y
[4] has put key 2 00000006 value x 2 6 y
[5] has put key 2 00000006 value x 2 6 y
[4] entry index 81 current proposal:  82 83[2] has put key 2 00000006 value x 2 6 y
 84 85
[4] has put key 1 00000008 value x 1 8 y
[5] has put key 1 00000008 value x 1 8 y
[2] has put key 1 00000008 value x 1 8 y
[4] entry index 82 current proposal:  83 84 85
[4] has put key 0 00000006 value x 0 6 y
[5] has put key 0 00000006 value x 0 6 y
[2] has put key 0 00000006 value x 0 6 y
[4] entry index 83 current proposal:  84 85
[4] propose cmd Snap potential next index 86
[4] propose cmd Snap potential next index 87
[4] propose cmd Snap potential next index 88
[4] entry index 84 current proposal:  85 86 87 88
[4] entry index 85 current proposal:  86 87 88
[4] propose cmd Put potential next index 89 with key 4 00000008 with value x 4 8 y
[4] propose cmd Put potential next index 90 with key 3 00000011 with value x 3 11 y
[4] entry index 86 current proposal:  87 88 89 90
[4] entry index 87 current proposal:  88 89 90
[4] propose cmd Put potential next index 91 with key 2 00000007 with value x 2 7 y
[4] propose cmd Put potential next index 92 with key 1 00000009 with value x 1 9 y
[4] entry index 88 current proposal:  89 90 91 92
[4] has put key 4 00000008 value x 4 8 y
[4] entry index 89 current proposal:  90 91 92
[5] has put key 4 00000008 value x 4 8 y
[2] has put key 4 00000008 value x 4 8 y
[4] propose cmd Put potential next index 93 with key 0 00000007 with value x 0 7 y
[4] propose cmd Put potential next index 94 with key 4 00000009 with value x 4 9 y
[4] with lastIdx 94 send hb to peers [2 3 4 5]  92  76  89
[4] propose cmd ChangePeer potential next index 95
[4] has put key 3 00000011 value x 3 11 y
[5] has put key 3 00000011 value x 3 11 y
[2] has put key 3 00000011 value x 3 11 y
[4] entry index 90 current proposal:  91 92 93 94
[4] has put key 2 00000007 value x 2 7 y
[5] has put key 2 00000007 value x 2 7 y
[2] has put key 2 00000007 value x 2 7 y
[4] entry index 91 current proposal:  92 93 94
[4] has put key 1 00000009 value x 1 9 y
[2] has put key 1 00000009 value x 1 9 y
[5] has put key 1 00000009 value x 1 9 y
[4] entry index 92 current proposal:  93 94
[4] propose cmd Put potential next index 95 with key 3 00000012 with value x 3 12 y
[4] propose cmd Put potential next index 96 with key 2 00000008 with value x 2 8 y
[4] propose cmd Put potential next index 97 with key 1 00000010 with value x 1 10 y
[4] has put key 0 00000007 value x 0 7 y
[2] has put key 0 00000007 value x 0 7 y
[5] has put key 0 00000007 value x 0 7 y
[4] entry index 93 current proposal:  94 95 96 97
[4] has put key 4 00000009 value x 4 9 y
[2] has put key 4 00000009 value x 4 9 y
[5] has put key 4 00000009 value x 4 9 y
[4] entry index 94 current proposal:  95 96 97
[4] has put key 3 00000012 value x 3 12 y
[2] has put key 3 00000012 value x 3 12 y
[5] has put key 3 00000012 value x 3 12 y
[4] entry index 95 current proposal:  96 97
[4] propose cmd Put potential next index 98 with key 0 00000008 with value x 0 8 y
[4] propose cmd Snap potential next index 99
[4] propose cmd Snap potential next index 100
[4] has put key 2 00000008 value x 2 8 y
[2] has put key 2 00000008 value x 2 8 y
[5] has put key 2 00000008 value x 2 8 y
[4] entry index 96 current proposal:  97 98 99 100
[4] propose cmd Put potential next index 101 with key 2 00000009 with value x 2 9 y
[4] has put key 1 00000010 value x 1 10 y
[5] has put key 1 00000010 value x 1 10 y
[2] has put key 1 00000010 value x 1 10 y
[4] entry index 97 current proposal:  98 99 100 101
[4] has put key 0 00000008 value x 0 8 y
[5] has put key 0 00000008 value x 0 8 y
[4] entry index 98 current proposal:  99 100 101
[4] entry index 99 current proposal:  100 101
[4] entry index 100 current proposal:  101
[2] has put key 0 00000008 value x 0 8 y
[4] propose cmd Snap potential next index 102
[4] propose cmd Put potential next index 103 with key 0 00000009 with value x 0 9 y
[4] propose cmd Put potential next index 104 with key 4 00000010 with value x 4 10 y
[4] propose cmd Put potential next index 105 with key 3 00000013 with value x 3 13 y
[4] has put key 2 00000009 value x 2 9 y
[4] entry index 101 current proposal:  102 103 104 105
[4] entry index 102 current proposal:  103 104 105
[2] has put key 2 00000009 value x 2 9 y
[4] propose cmd Snap potential next index 106
[4] propose cmd Snap potential next index 107
[4] with lastIdx 107 send hb to peers [2 3 4 5]  105  76  102
[5] has put key 2 00000009 value x 2 9 y
[4] has put key 0 00000009 value x 0 9 y
[2] has put key 0 00000009 value x 0 9 y
[4] entry index 103 current proposal:  104 105 106 107
[5] has put key 0 00000009 value x 0 9 y
[4] propose cmd ChangePeer potential next index 108
[4] propose cmd Put potential next index 108 with key 0 00000010 with value x 0 10 y
[4] has put key 4 00000010 value x 4 10 y
[4] entry index 104 current proposal:  105 106 107 108
[4] has put key 3 00000013 value x 3 13 y
[5] has put key 4 00000010 value x 4 10 y
[2] has put key 4 00000010 value x 4 10 y
[4] entry index 105 current proposal:  106 107 108
[4] entry index 106 current proposal:  107 108
[4] entry index 107 current proposal:  108
[2] has put key 3 00000013 value x 3 13 y
[5] has put key 3 00000013 value x 3 13 y
[4] propose cmd Snap potential next index 109
[4] propose cmd Put potential next index 110 with key 2 00000010 with value x 2 10 y
[4] propose cmd Snap potential next index 111
[4] propose cmd Snap potential next index 112
[4] has put key 0 00000010 value x 0 10 y
[4] entry index 108 current proposal:  109 110 111 112
[4] propose cmd Put potential next index 113 with key 0 00000011 with value x 0 11 y
[5] has put key 0 00000010 value x 0 10 y
[2] has put key 0 00000010 value x 0 10 y
[4] entry index 109 current proposal:  110 111 112 113
[4] has put key 2 00000010 value x 2 10 y
[4] entry index 110 current proposal:  111 112 113
[4] entry index 111 current proposal:  112 113
[4] entry index 112 current proposal:  113
[5] has put key 2 00000010 value x 2 10 y
[2] has put key 2 00000010 value x 2 10 y
[4] propose cmd Put potential next index 114 with key 4 00000011 with value x 4 11 y
[4] propose cmd CompactLog potential next index 115
[4] propose cmd Put potential next index 116 with key 2 00000011 with value x 2 11 y
[4] propose cmd Put potential next index 117 with key 3 00000014 with value x 3 14 y
[4] propose cmd Snap potential next index 118
[4] has put key 0 00000011 value x 0 11 y
[2] has put key 0 00000011 value x 0 11 y
[5] has put key 0 00000011 value x 0 11 y
[4] entry index 113 current proposal:  114 116 117 118
[4] has put key 4 00000011 value x 4 11 y
[2] has put key 4 00000011 value x 4 11 y
[4] entry index 114 current proposal:  116 117 118
[4] has put key 2 00000011 value x 2 11 y
[5] has put key 4 00000011 value x 4 11 y
[4] entry index 116 current proposal:  117 118
[4] has put key 3 00000014 value x 3 14 y
[5] has put key 2 00000011 value x 2 11 y
[5] has put key 3 00000014 value x 3 14 y
[4] entry index 117 current proposal:  118
[4] entry index 118 current proposal: 
[2] has put key 2 00000011 value x 2 11 y
[4] propose cmd Snap potential next index 119
[4] propose cmd Snap potential next index 120
[4] propose cmd Put potential next index 121 with key 2 00000012 with value x 2 12 y
[4] propose cmd Put potential next index 122 with key 3 00000015 with value x 3 15 y
[4] propose cmd Put potential next index 123 with key 1 00000011 with value x 1 11 y
[2] has put key 3 00000014 value x 3 14 y
[4] with lastIdx 123 send hb to peers [2 3 4 5]  118  76  118
[4] propose cmd ChangePeer potential next index 124
[4] entry index 119 current proposal:  120 121 122 123
[4] entry index 120 current proposal:  121 122 123
[4] has put key 2 00000012 value x 2 12 y
[4] entry index 121 current proposal:  122 123
[4] has put key 3 00000015 value x 3 15 y
[5] has put key 2 00000012 value x 2 12 y
[2] has put key 2 00000012 value x 2 12 y
[4] entry index 122 current proposal:  123
[4] has put key 1 00000011 value x 1 11 y
[5] has put key 3 00000015 value x 3 15 y
[2] has put key 3 00000015 value x 3 15 y
[4] entry index 123 current proposal: 
[4] propose cmd Snap potential next index 124
[4] propose cmd Snap potential next index 125
[4] propose cmd Put potential next index 126 with key 2 00000013 with value x 2 13 y
[4] propose cmd Put potential next index 127 with key 3 00000016 with value x 3 16 y
[4] propose cmd Put potential next index 128 with key 1 00000012 with value x 1 12 y
[5] has put key 1 00000011 value x 1 11 y
[2] has put key 1 00000011 value x 1 11 y
[4] entry index 124 current proposal:  125 126 127 128
[4] entry index 125 current proposal:  126 127 128
[4] has put key 2 00000013 value x 2 13 y
[5] has put key 2 00000013 value x 2 13 y
[4] entry index 126 current proposal:  127 128
[4] has put key 3 00000016 value x 3 16 y
[2] has put key 2 00000013 value x 2 13 y
[5] has put key 3 00000016 value x 3 16 y
[4] entry index 127 current proposal:  128
[4] has put key 1 00000012 value x 1 12 y
[2] has put key 3 00000016 value x 3 16 y
[4] entry index 128 current proposal: 
[2] has put key 1 00000012 value x 1 12 y
[4] propose cmd Snap potential next index 129
[4] propose cmd Put potential next index 130 with key 0 00000012 with value x 0 12 y
[4] propose cmd Put potential next index 131 with key 2 00000014 with value x 2 14 y
[4] propose cmd Put potential next index 132 with key 3 00000017 with value x 3 17 y
[4] propose cmd Snap potential next index 133
[5] has put key 1 00000012 value x 1 12 y
[4] entry index 129 current proposal:  130 131 132 133
[4] has put key 0 00000012 value x 0 12 y
[4] entry index 130 current proposal:  131 132 133
[4] has put key 2 00000014 value x 2 14 y
[2] has put key 0 00000012 value x 0 12 y
[5] has put key 0 00000012 value x 0 12 y
[4] entry index 131 current proposal:  132 133
[4] has put key 3 00000017 value x 3 17 y
[2] has put key 2 00000014 value x 2 14 y
[5] has put key 2 00000014 value x 2 14 y
[5] has put key 3 00000017 value x 3 17 y
[4] entry index 132 current proposal:  133
[4] entry index 133 current proposal: 
[2] has put key 3 00000017 value x 3 17 y
[4] propose cmd Snap potential next index 134
[4] propose cmd Put potential next index 135 with key 0 00000013 with value x 0 13 y
[4] propose cmd Snap potential next index 136
[4] propose cmd Snap potential next index 137
[4] propose cmd Snap potential next index 138
[4] entry index 134 current proposal:  135 136 137 138
[4] propose cmd Put potential next index 139 with key 4 00000012 with value x 4 12 y
[4] has put key 0 00000013 value x 0 13 y
[4] entry index 135 current proposal:  136 137 138 139
[4] entry index 136 current proposal:  137 138 139
[4] entry index 137 current proposal:  138 139
[4] entry index 138 current proposal:  139
[2] has put key 0 00000013 value x 0 13 y
[5] has put key 0 00000013 value x 0 13 y
[4] propose cmd Snap potential next index 140
[4] propose cmd Snap potential next index 141
[4] propose cmd Snap potential next index 142
[4] propose cmd Snap potential next index 143
[4] with lastIdx 143 send hb to peers [2 3 4 5]  139  76  138
[4] propose cmd ChangePeer potential next index 144
[4] has put key 4 00000012 value x 4 12 y
[5] has put key 4 00000012 value x 4 12 y
[4] entry index 139 current proposal:  140 141 142 143
[4] entry index 140 current proposal:  141 142 143
[4] entry index 141 current proposal:  142 143
[4] entry index 142 current proposal:  143
[4] entry index 143 current proposal: 
[2] has put key 4 00000012 value x 4 12 y
[4] propose cmd Put potential next index 144 with key 4 00000013 with value x 4 13 y
[4] propose cmd Snap potential next index 145
[4] propose cmd Snap potential next index 146
[4] propose cmd Snap potential next index 147
[4] propose cmd Snap potential next index 148
[4] has put key 4 00000013 value x 4 13 y
[4] entry index 144 current proposal:  145 146 147 148
[5] has put key 4 00000013 value x 4 13 y
[2] has put key 4 00000013 value x 4 13 y
[4] propose cmd Snap potential next index 149
[4] entry index 145 current proposal:  146 147 148 149
[4] entry index 146 current proposal:  147 148 149
[4] entry index 147 current proposal:  148 149
[4] propose cmd Put potential next index 150 with key 0 00000014 with value x 0 14 y
[4] propose cmd Snap potential next index 151
[4] propose cmd Snap potential next index 152
[4] entry index 148 current proposal:  149 150 151 152
[4] entry index 149 current proposal:  150 151 152
[4] has put key 0 00000014 value x 0 14 y
[4] entry index 150 current proposal:  151 152
[4] entry index 151 current proposal:  152
[4] entry index 152 current proposal: 
[5] has put key 0 00000014 value x 0 14 y
[2] has put key 0 00000014 value x 0 14 y
[4] propose cmd Put potential next index 153 with key 1 00000013 with value x 1 13 y
[4] propose cmd Snap potential next index 154
[4] propose cmd Snap potential next index 155
[4] propose cmd Put potential next index 156 with key 0 00000015 with value x 0 15 y
[4] propose cmd Put potential next index 157 with key 3 00000018 with value x 3 18 y
[4] has put key 1 00000013 value x 1 13 y
[2] has put key 1 00000013 value x 1 13 y
[4] entry index 153 current proposal:  154 155 156 157
[5] has put key 1 00000013 value x 1 13 y
[4] propose cmd Snap potential next index 158
[4] entry index 154 current proposal:  155 156 157 158
[4] entry index 155 current proposal:  156 157 158
[4] has put key 0 00000015 value x 0 15 y
[2] has put key 0 00000015 value x 0 15 y
[5] has put key 0 00000015 value x 0 15 y
[4] entry index 156 current proposal:  157 158
[4] has put key 3 00000018 value x 3 18 y
[2] has put key 3 00000018 value x 3 18 y
[5] has put key 3 00000018 value x 3 18 y
[4] entry index 157 current proposal:  158
[4] propose cmd Put potential next index 159 with key 4 00000014 with value x 4 14 y
[4] propose cmd Put potential next index 160 with key 2 00000015 with value x 2 15 y
[4] propose cmd Put potential next index 161 with key 0 00000016 with value x 0 16 y
[4] propose cmd Put potential next index 162 with key 3 00000019 with value x 3 19 y
[4] entry index 158 current proposal:  159 160 161 162
[4] propose cmd Put potential next index 163 with key 1 00000014 with value x 1 14 y
[4] has put key 4 00000014 value x 4 14 y
[4] entry index 159 current proposal:  160 161 162 163
[5] has put key 4 00000014 value x 4 14 y
[2] has put key 4 00000014 value x 4 14 y
[4] with lastIdx 163 send hb to peers [2 3 4 5]  159  76  162
[4] propose cmd Snap potential next index 164
[4] has put key 2 00000015 value x 2 15 y
[4] entry index 160 current proposal:  161 162 163 164
[4] has put key 0 00000016 value x 0 16 y
[5] has put key 2 00000015 value x 2 15 y
[2] has put key 2 00000015 value x 2 15 y
[4] entry index 161 current proposal:  162 163 164
[4] has put key 3 00000019 value x 3 19 y
[2] has put key 0 00000016 value x 0 16 y
[5] has put key 0 00000016 value x 0 16 y
[4] entry index 162 current proposal:  163 164
[2] has put key 3 00000019 value x 3 19 y
[5] has put key 3 00000019 value x 3 19 y
[4] propose cmd ChangePeer potential next index 165
[4] propose cmd Snap potential next index 165
[4] propose cmd Put potential next index 166 with key 0 00000017 with value x 0 17 y
[4] propose cmd Put potential next index 167 with key 3 00000020 with value x 3 20 y
[4] has put key 1 00000014 value x 1 14 y
[4] entry index 163 current proposal:  164 165 166 167
[4] entry index 164 current proposal:  165 166 167
[4] entry index 165 current proposal:  166 167
[4] has put key 0 00000017 value x 0 17 y
[5] has put key 1 00000014 value x 1 14 y
[2] has put key 1 00000014 value x 1 14 y
[4] entry index 166 current proposal:  167
[4] has put key 3 00000020 value x 3 20 y
[2] has put key 0 00000017 value x 0 17 y
[4] entry index 167 current proposal: 
[2] has put key 3 00000020 value x 3 20 y
[4] propose cmd Snap potential next index 168
[4] propose cmd Put potential next index 169 with key 1 00000015 with value x 1 15 y
[4] propose cmd Put potential next index 170 with key 2 00000016 with value x 2 16 y
[4] propose cmd Snap potential next index 171
[4] propose cmd Put potential next index 172 with key 3 00000021 with value x 3 21 y
[5] has put key 0 00000017 value x 0 17 y
[5] has put key 3 00000020 value x 3 20 y
[4] entry index 168 current proposal:  169 170 171 172
[4] has put key 1 00000015 value x 1 15 y
[2] has put key 1 00000015 value x 1 15 y
[4] entry index 169 current proposal:  170 171 172
[4] has put key 2 00000016 value x 2 16 y
[2] has put key 2 00000016 value x 2 16 y
[4] entry index 170 current proposal:  171 172
[4] propose cmd Snap potential next index 173
[4] propose cmd Snap potential next index 174
[4] propose cmd Snap potential next index 175
[5] has put key 1 00000015 value x 1 15 y
[5] has put key 2 00000016 value x 2 16 y
[4] entry index 171 current proposal:  172 173 174 175
[4] has put key 3 00000021 value x 3 21 y
[4] entry index 172 current proposal:  173 174 175
[4] entry index 173 current proposal:  174 175
[4] with lastIdx 175 send hb to peers [2 3 4 5]  175  76  173
[4] propose cmd Put potential next index 176 with key 0 00000018 with value x 0 18 y
[4] propose cmd Put potential next index 177 with key 3 00000022 with value x 3 22 y
[4] propose cmd Put potential next index 178 with key 4 00000015 with value x 4 15 y
[4] propose cmd ChangePeer potential next index 179
[5] has put key 3 00000021 value x 3 21 y
[2] has put key 3 00000021 value x 3 21 y
[4] entry index 174 current proposal:  175 176 177 178
[4] entry index 175 current proposal:  176 177 178
[4] propose cmd Put potential next index 179 with key 1 00000016 with value x 1 16 y
[4] propose cmd Snap potential next index 180
[4] has put key 0 00000018 value x 0 18 y
[4] entry index 176 current proposal:  177 178 179 180
[4] has put key 3 00000022 value x 3 22 y
[2] has put key 0 00000018 value x 0 18 y
[4] entry index 177 current proposal:  178 179 180
[4] has put key 4 00000015 value x 4 15 y
[5] has put key 0 00000018 value x 0 18 y
[2] has put key 3 00000022 value x 3 22 y
[4] entry index 178 current proposal:  179 180
[5] has put key 3 00000022 value x 3 22 y
[2] has put key 4 00000015 value x 4 15 y
[4] propose cmd Snap potential next index 181
[4] propose cmd Snap potential next index 182
[4] propose cmd Snap potential next index 183
[5] has put key 4 00000015 value x 4 15 y
[4] has put key 1 00000016 value x 1 16 y
[4] entry index 179 current proposal:  180 181 182 183
[4] entry index 180 current proposal:  181 182 183
[2] has put key 1 00000016 value x 1 16 y
[5] has put key 1 00000016 value x 1 16 y
[4] propose cmd Snap potential next index 184
[4] propose cmd Snap potential next index 185
[4] entry index 181 current proposal:  182 183 184 185
[4] entry index 182 current proposal:  183 184 185
[4] entry index 183 current proposal:  184 185
[4] propose cmd Put potential next index 186 with key 3 00000023 with value x 3 23 y
[4] propose cmd Put potential next index 187 with key 0 00000019 with value x 0 19 y
[4] propose cmd Snap potential next index 188
[4] entry index 184 current proposal:  185 186 187 188
[4] propose cmd Put potential next index 189 with key 1 00000017 with value x 1 17 y
[4] entry index 185 current proposal:  186 187 188 189
[4] has put key 3 00000023 value x 3 23 y
[4] entry index 186 current proposal:  187 188 189
[4] has put key 0 00000019 value x 0 19 y
[5] has put key 3 00000023 value x 3 23 y
[2] has put key 3 00000023 value x 3 23 y
[4] entry index 187 current proposal:  188 189
[4] entry index 188 current proposal:  189
[2] has put key 0 00000019 value x 0 19 y
[4] propose cmd Put potential next index 190 with key 2 00000017 with value x 2 17 y
[4] propose cmd Put potential next index 191 with key 3 00000024 with value x 3 24 y
[4] propose cmd Snap potential next index 192
[4] propose cmd Put potential next index 193 with key 4 00000016 with value x 4 16 y
[5] has put key 0 00000019 value x 0 19 y
[4] with lastIdx 193 send hb to peers [2 3 4 5]  192  76  188
[4] propose cmd ChangePeer potential next index 194
[4] becomes leader
panic: [region 1] 3 meta corrupted id:1 region_epoch:<conf_ver:2 version:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 >  != id:1 region_epoch:<conf_ver:1 version:1 > peers:<id:1 store_id:1 > peers:<id:2 store_id:2 > peers:<id:3 store_id:3 > peers:<id:4 store_id:4 > peers:<id:5 store_id:5 > 

goroutine 267 [running]:
github.com/pingcap-incubator/tinykv/kv/raftstore.(*peerMsgHandler).checkSnapshot(0xc0043f1e38, 0xc17cebcc80, 0x0, 0x0, 0x0)
	/home/spadea/STUDY/tinykv/kv/raftstore/peer_msg_handler.go:907 +0x83f
github.com/pingcap-incubator/tinykv/kv/raftstore.(*peerMsgHandler).onRaftMsg(0xc0043f1e38, 0xc17cebcc80, 0xc0043f1d40, 0x8085bf32)
	/home/spadea/STUDY/tinykv/kv/raftstore/peer_msg_handler.go:741 +0x29d
github.com/pingcap-incubator/tinykv/kv/raftstore.(*peerMsgHandler).HandleMsg(0xc0043f1e38, 0x3, 0x1, 0xba91e0, 0xc17cebcc80)
	/home/spadea/STUDY/tinykv/kv/raftstore/peer_msg_handler.go:505 +0x9c
github.com/pingcap-incubator/tinykv/kv/raftstore.(*raftWorker).run(0xc0042737e0, 0xc0001ee3c0, 0xc000026c10)
	/home/spadea/STUDY/tinykv/kv/raftstore/raft_worker.go:56 +0x4ff
created by github.com/pingcap-incubator/tinykv/kv/raftstore.(*Raftstore).startWorkers
	/home/spadea/STUDY/tinykv/kv/raftstore/raftstore.go:270 +0xe6
FAIL	github.com/pingcap-incubator/tinykv/kv/test_raftstore	3.723s
FAIL
