GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./kv/test_raftstore -run ^TestSnapshotUnreliableRecoverConcurrentPartition2C|| true
=== RUN   TestSnapshotUnreliableRecoverConcurrentPartition2C
[4] becomes leader
[4] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[4] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[4] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[4] with lastIdx 6 send hb to peers [1 2 3 4 5] 6 6 6 6
[4] with lastIdx 18 send hb to peers [1 2 3 4 5] 16 16 16 16
[4] with lastIdx 31 send hb to peers [1 2 3 4 5] 28 28 28 28
[4] with lastIdx 40 send hb to peers [1 2 3 4 5] 36 36 36 35
[4] with lastIdx 58 send hb to peers [1 2 3 4 5] 55 54 55 46
[4] with lastIdx 75 send hb to peers [1 2 3 4 5] 74 72 74 46
[4] with lastIdx 99 send hb to peers [1 2 3 4 5] 97 97 97 46
[4] with lastIdx 118 send hb to peers [1 2 3 4 5] 115 115 115 46
[4] with lastIdx 142 send hb to peers [1 2 3 4 5] 139 140 139 46
[4] with lastIdx 167 send hb to peers [1 2 3 4 5] 167 165 165 46
[4] with lastIdx 199 send hb to peers [1 2 3 4 5] 197 197 196 46
[5] receives snapshot from [4]
[4] with lastIdx 216 send hb to peers [1 2 3 4 5] 211 216 210 46
[4] with lastIdx 262 send hb to peers [1 2 3 4 5] 211 259 210 259
[4] with lastIdx 303 send hb to peers [1 2 3 4 5] 211 301 210 301
[4] with lastIdx 329 send hb to peers [1 2 3 4 5] 211 326 210 325
[4] with lastIdx 355 send hb to peers [1 2 3 4 5] 211 354 210 354
[4] with lastIdx 388 send hb to peers [1 2 3 4 5] 211 387 210 387
[4] with lastIdx 422 send hb to peers [1 2 3 4 5] 211 420 210 421
[4] with lastIdx 456 send hb to peers [1 2 3 4 5] 211 453 210 453
[4] with lastIdx 493 send hb to peers [1 2 3 4 5] 211 492 210 492
[4] with lastIdx 529 send hb to peers [1 2 3 4 5] 211 526 210 526
[4] with lastIdx 552 send hb to peers [1 2 3 4 5] 211 550 210 550
[4] with lastIdx 573 send hb to peers [1 2 3 4 5] 211 572 210 573
[4] with lastIdx 594 send hb to peers [1 2 3 4 5] 211 591 210 591
[1] receives snapshot from [4]
[4] with lastIdx 612 send hb to peers [1 2 3 4 5] 211 607 210 609
[4] with lastIdx 631 send hb to peers [1 2 3 4 5] 627 628 210 629
[4] with lastIdx 652 send hb to peers [1 2 3 4 5] 648 649 210 648
[4] with lastIdx 676 send hb to peers [1 2 3 4 5] 673 673 210 673
[4] with lastIdx 701 send hb to peers [1 2 3 4 5] 698 697 210 698
[4] with lastIdx 735 send hb to peers [1 2 3 4 5] 730 731 210 731
[4] with lastIdx 765 send hb to peers [1 2 3 4 5] 761 760 210 756
[3] receives snapshot from [4]
[4] with lastIdx 792 send hb to peers [1 2 3 4 5] 787 789 788 756
[4] with lastIdx 817 send hb to peers [1 2 3 4 5] 813 814 813 756
[4] with lastIdx 845 send hb to peers [1 2 3 4 5] 844 844 843 756
[4] with lastIdx 869 send hb to peers [1 2 3 4 5] 867 867 866 756
[4] with lastIdx 895 send hb to peers [1 2 3 4 5] 893 892 892 756
[4] with lastIdx 918 send hb to peers [1 2 3 4 5] 918 918 904 756
[4] with lastIdx 946 send hb to peers [1 2 3 4 5] 945 944 904 756
[4] with lastIdx 972 send hb to peers [1 2 3 4 5] 969 969 904 756
[4] with lastIdx 1001 send hb to peers [1 2 3 4 5] 1000 1000 904 756
[4] with lastIdx 1027 send hb to peers [1 2 3 4 5] 1025 1025 904 756
[4] with lastIdx 1086 send hb to peers [1 2 3 4 5] 1084 1084 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] with lastIdx 1117 send hb to peers [1 2 3 4 5] 1113 1114 904 756
[4] becomes leader
[3] receives snapshot from [4]
read from clients 0
[4] becomes leader
[4] with lastIdx 1129 send hb to peers [1 2 3 4 5] 1128 1128 1129 1081
[4] with lastIdx 1135 send hb to peers [1 2 3 4 5] 1134 1133 1134 1081
[4] with lastIdx 1140 send hb to peers [1 2 3 4 5] 1139 1139 1139 1081
[4] with lastIdx 1145 send hb to peers [1 2 3 4 5] 1144 1144 1144 1081
[4] with lastIdx 1150 send hb to peers [1 2 3 4 5] 1150 1150 1149 1081
[4] with lastIdx 1156 send hb to peers [1 2 3 4 5] 1155 1155 1155 1081
[4] with lastIdx 1161 send hb to peers [1 2 3 4 5] 1161 1161 1161 1081
[4] with lastIdx 1167 send hb to peers [1 2 3 4 5] 1166 1166 1166 1081
[4] with lastIdx 1173 send hb to peers [1 2 3 4 5] 1172 1172 1172 1081
[4] with lastIdx 1179 send hb to peers [1 2 3 4 5] 1177 1178 1178 1081
[4] with lastIdx 1184 send hb to peers [1 2 3 4 5] 1183 1184 1184 1081
[5] receives snapshot from [4]
[4] with lastIdx 1190 send hb to peers [1 2 3 4 5] 1189 1189 1190 1190
[4] with lastIdx 1195 send hb to peers [1 2 3 4 5] 1195 1195 1195 1194
[4] with lastIdx 1201 send hb to peers [1 2 3 4 5] 1200 1200 1200 1201
[4] with lastIdx 1207 send hb to peers [1 2 3 4 5] 1206 1206 1206 1205
[4] with lastIdx 1212 send hb to peers [1 2 3 4 5] 1211 1211 1211 1211
[4] with lastIdx 1217 send hb to peers [1 2 3 4 5] 1216 1216 1216 1216
[4] with lastIdx 1223 send hb to peers [1 2 3 4 5] 1222 1222 1222 1222
[4] with lastIdx 1229 send hb to peers [1 2 3 4 5] 1228 1228 1228 1228
[4] with lastIdx 1234 send hb to peers [1 2 3 4 5] 1233 1233 1233 1233
[4] with lastIdx 1240 send hb to peers [1 2 3 4 5] 1239 1239 1240 1240
[4] with lastIdx 1246 send hb to peers [1 2 3 4 5] 1245 1245 1245 1245
read from clients 1
[4] with lastIdx 1252 send hb to peers [1 2 3 4 5] 1251 1251 1251 1250
[4] with lastIdx 1259 send hb to peers [1 2 3 4 5] 1258 1258 1258 1258
[4] with lastIdx 1267 send hb to peers [1 2 3 4 5] 1266 1266 1267 1266
[4] with lastIdx 1273 send hb to peers [1 2 3 4 5] 1273 1273 1273 1273
[4] with lastIdx 1279 send hb to peers [1 2 3 4 5] 1279 1278 1279 1278
[4] with lastIdx 1286 send hb to peers [1 2 3 4 5] 1285 1286 1285 1286
[4] with lastIdx 1294 send hb to peers [1 2 3 4 5] 1293 1293 1293 1293
[4] with lastIdx 1302 send hb to peers [1 2 3 4 5] 1301 1301 1301 1301
[4] with lastIdx 1309 send hb to peers [1 2 3 4 5] 1309 1308 1309 1309
[4] with lastIdx 1318 send hb to peers [1 2 3 4 5] 1317 1317 1317 1317
[4] with lastIdx 1325 send hb to peers [1 2 3 4 5] 1324 1325 1324 1325
[4] with lastIdx 1336 send hb to peers [1 2 3 4 5] 1334 1335 1334 1335
read from clients 2
[4] with lastIdx 1345 send hb to peers [1 2 3 4 5] 1344 1344 1344 1344
[4] with lastIdx 1354 send hb to peers [1 2 3 4 5] 1353 1353 1353 1353
[4] with lastIdx 1364 send hb to peers [1 2 3 4 5] 1363 1364 1363 1364
[4] with lastIdx 1374 send hb to peers [1 2 3 4 5] 1373 1373 1372 1373
[4] with lastIdx 1381 send hb to peers [1 2 3 4 5] 1380 1380 1381 1381
[4] with lastIdx 1390 send hb to peers [1 2 3 4 5] 1390 1389 1389 1389
[4] with lastIdx 1400 send hb to peers [1 2 3 4 5] 1399 1399 1399 1399
[4] with lastIdx 1407 send hb to peers [1 2 3 4 5] 1406 1406 1406 1406
[4] with lastIdx 1414 send hb to peers [1 2 3 4 5] 1413 1413 1412 1413
[4] with lastIdx 1420 send hb to peers [1 2 3 4 5] 1419 1419 1418 1419
[4] with lastIdx 1427 send hb to peers [1 2 3 4 5] 1426 1425 1426 1426
[4] with lastIdx 1435 send hb to peers [1 2 3 4 5] 1434 1434 1434 1433
[4] with lastIdx 1441 send hb to peers [1 2 3 4 5] 1440 1441 1440 1440
[4] with lastIdx 1448 send hb to peers [1 2 3 4 5] 1447 1447 1447 1447
read from clients 3
[4] with lastIdx 1455 send hb to peers [1 2 3 4 5] 1454 1454 1454 1454
[4] with lastIdx 1463 send hb to peers [1 2 3 4 5] 1462 1462 1462 1462
[4] with lastIdx 1470 send hb to peers [1 2 3 4 5] 1469 1469 1469 1469
[4] with lastIdx 1477 send hb to peers [1 2 3 4 5] 1476 1476 1476 1476
[4] with lastIdx 1487 send hb to peers [1 2 3 4 5] 1486 1486 1486 1486
[4] with lastIdx 1497 send hb to peers [1 2 3 4 5] 1496 1496 1496 1496
[4] with lastIdx 1504 send hb to peers [1 2 3 4 5] 1503 1503 1503 1503
[4] with lastIdx 1512 send hb to peers [1 2 3 4 5] 1512 1512 1512 1512
[4] with lastIdx 1522 send hb to peers [1 2 3 4 5] 1521 1521 1521 1521
[4] with lastIdx 1533 send hb to peers [1 2 3 4 5] 1533 1532 1532 1533
[4] with lastIdx 1551 send hb to peers [1 2 3 4 5] 1549 1550 1550 1550
[4] with lastIdx 1565 send hb to peers [1 2 3 4 5] 1564 1565 1565 1564
read from clients 4
[4] with lastIdx 1575 send hb to peers [1 2 3 4 5] 1575 1574 1575 1575
[4] with lastIdx 1585 send hb to peers [1 2 3 4 5] 1585 1585 1584 1584
[4] with lastIdx 1599 send hb to peers [1 2 3 4 5] 1598 1599 1598 1599
[4] with lastIdx 1617 send hb to peers [1 2 3 4 5] 1616 1616 1616 1617
[4] with lastIdx 1652 send hb to peers [1 2 3 4 5] 1651 1651 1651 1651
[4] with lastIdx 1674 send hb to peers [1 2 3 4 5] 1673 1673 1673 1673
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1687 send hb to peers [1 2 3 4 5] 1687 1687 1687 1687
[4] with lastIdx 1702 send hb to peers [1 2 3 4 5] 1700 1700 1700 1700
[4] with lastIdx 1735 send hb to peers [1 2 3 4 5] 1732 1731 1732 1732
[4] with lastIdx 1766 send hb to peers [1 2 3 4 5] 1765 1765 1762 1765
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[4] with lastIdx 1787 send hb to peers [1 2 3 4 5] 1782 1782 1782 1787
[3] becomes leader
[3] with lastIdx 1783 send hb to peers [1 2 3 4 5] 1112 1112 1112 1112
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1112 1112 1112
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1112 1112 1112
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1112 1112 1788
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1788 1112 1788
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1788 1788 1788
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1788 1788 1788
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1788 1788 1788
[3] with lastIdx 1788 send hb to peers [1 2 3 4 5] 1788 1788 1788 1788
read from clients 0
[2] becomes leader
read from clients 1
[2] with lastIdx 1809 send hb to peers [1 2 3 4 5] 1808 1809 1808 1808
read from clients 2
read from clients 3
[2] with lastIdx 1830 send hb to peers [1 2 3 4 5] 1830 1829 1829 1830
read from clients 4
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1846 send hb to peers [1 2 3 4 5] 1846 1846 1846 1846
[2] with lastIdx 1856 send hb to peers [1 2 3 4 5] 1851 1851 1851 1851
[2] with lastIdx 1890 send hb to peers [1 2 3 4 5] 1887 1887 1887 1887
[2] with lastIdx 1925 send hb to peers [1 2 3 4 5] 1923 1923 1922 1923
[2] with lastIdx 1963 send hb to peers [1 2 3 4 5] 1960 1951 1960 1957
[2] with lastIdx 1992 send hb to peers [1 2 3 4 5] 1989 1951 1989 1989
[2] with lastIdx 2016 send hb to peers [1 2 3 4 5] 2011 1951 2011 2011
[2] with lastIdx 2044 send hb to peers [1 2 3 4 5] 2042 1951 2043 2043
[2] with lastIdx 2071 send hb to peers [1 2 3 4 5] 2067 1951 2066 2067
[2] with lastIdx 2098 send hb to peers [1 2 3 4 5] 2093 1951 2093 2093
[2] with lastIdx 2115 send hb to peers [1 2 3 4 5] 2114 1951 2111 2114
[3] receives snapshot from [2]
[2] with lastIdx 2135 send hb to peers [1 2 3 4 5] 2132 1951 2124 2133
[3] becomes leader
[5] becomes leader
[5] with lastIdx 2148 send hb to peers [1 2 3 4 5] 1699 2148 1699 1699
[5] with lastIdx 2148 send hb to peers [1 2 3 4 5] 1699 2148 1699 1699
[5] with lastIdx 2148 send hb to peers [1 2 3 4 5] 1699 2148 1699 1699
[5] with lastIdx 2148 send hb to peers [1 2 3 4 5] 1699 2148 1699 1699
[5] with lastIdx 2148 send hb to peers [1 2 3 4 5] 1699 2148 1699 1699
[5] with lastIdx 2148 send hb to peers [1 2 3 4 5] 1699 2148 2148 1699
read from clients 0
[2] becomes leader
[2] with lastIdx 2154 send hb to peers [1 2 3 4 5] 2154 2154 2154 2154
[2] with lastIdx 2162 send hb to peers [1 2 3 4 5] 2161 2161 2161 2161
[2] with lastIdx 2168 send hb to peers [1 2 3 4 5] 2167 2167 2167 2167
[2] with lastIdx 2175 send hb to peers [1 2 3 4 5] 2174 2174 2174 2174
read from clients 1
[2] with lastIdx 2183 send hb to peers [1 2 3 4 5] 2182 2182 2182 2182
[2] with lastIdx 2189 send hb to peers [1 2 3 4 5] 2188 2188 2189 2188
[2] with lastIdx 2197 send hb to peers [1 2 3 4 5] 2196 2196 2196 2196
[2] with lastIdx 2204 send hb to peers [1 2 3 4 5] 2203 2203 2204 2203
read from clients 2
[2] with lastIdx 2212 send hb to peers [1 2 3 4 5] 2211 2211 2211 2211
[2] with lastIdx 2219 send hb to peers [1 2 3 4 5] 2218 2218 2218 2218
[2] with lastIdx 2227 send hb to peers [1 2 3 4 5] 2226 2226 2226 2226
[2] with lastIdx 2235 send hb to peers [1 2 3 4 5] 2234 2234 2234 2234
read from clients 3
[2] with lastIdx 2243 send hb to peers [1 2 3 4 5] 2242 2242 2242 2242
[2] with lastIdx 2252 send hb to peers [1 2 3 4 5] 2250 2251 2251 2251
[2] with lastIdx 2263 send hb to peers [1 2 3 4 5] 2263 2263 2263 2262
read from clients 4
[2] with lastIdx 2274 send hb to peers [1 2 3 4 5] 2274 2273 2274 2274
[2] with lastIdx 2287 send hb to peers [1 2 3 4 5] 2286 2286 2286 2286
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2299 2299
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
[2] with lastIdx 2300 send hb to peers [1 2 3 4 5] 2300 2300 2300 2300
--- PASS: TestSnapshotUnreliableRecoverConcurrentPartition2C (35.63s)
PASS
ok  	github.com/pingcap-incubator/tinykv/kv/test_raftstore	35.748s
